# Shared jobs specific to the OpenLab Project

- job:
    name: base
    parent: null
    description: |
      A subset of what the 'base' job provides: the absolute minimum considered
      required to run for any one job.
      It doesn't set up cached git repositories, will not set up mirrors,
      doesn't validate the node and does not generate an ARA report.
      These tasks, if required, can be included by the dependant jobs
      themselves on a need basis.
    attempts: 2
    pre-run: playbooks/base/pre.yaml
    post-run:
      - playbooks/base/post-ssh.yaml
      - playbooks/base/post-logs.yaml
    roles:
      - zuul: theopenlab/zuul-jobs
      - zuul: theopenlab/project-config
    timeout: 1800
    nodeset: ubuntu-xenial
    secrets:
      - site_logs

# Common test base job
- job:
    name: init-test
    description: |
      Base job for all types of test jobs. Ensure workspace and copy log files.
    pre-run: playbooks/init-test/pre.yaml
    post-run: playbooks/init-test/post.yaml
    timeout: 10800
    vars:
      global_env:
        OS_BRANCH: master
        # LOGS/RESULTS_PATH is created in roles.prepare_workspace, we enable
        # these two vars in here for cross playbook usage.
        LOGS_PATH: '{{ ansible_user_dir }}/workspace/logs'
        RESULTS_PATH: '{{ ansible_user_dir }}/workspace/test_results'

# Golang test base job
- job:
    name: golang-test
    parent: init-test
    description: |
      Base job for all types of golang test jobs.
    post-run: playbooks/golang-test/post.yaml

# Terraform-provider-openstack jobs
- job:
    name: terraform-provider-openstack-unittest
    parent: golang-test
    description: |
      Run terraform-provider-openstack unit test
    run: playbooks/terraform-provider-openstack-unittest/run.yaml
    nodeset: ubuntu-xenial-ut

## ========== terraform-provider-openstack + openstack jobs ==============

### parent job
- job:
    name: terraform-provider-openstack-acceptance-test
    parent: golang-test
    description: |
      Run terraform-provider-openstack acceptance test against master OpenStack
    run: playbooks/terraform-provider-openstack-acceptance-test/run.yaml

### son job against stein branch of OpenStack
- job:
    name: terraform-provider-openstack-acceptance-test-stein
    parent: terraform-provider-openstack-acceptance-test
    description: |
      Run terraform-provider-openstack acceptance test against stein branch of OpenStack
    vars:
      global_env:
        OS_BRANCH: stable/stein
### grandson job pinned v1.19.0 against stein branch of OpenStack
- job:
    name: terraform-provider-openstack-v1.19.0-acceptance-test-stein
    parent: terraform-provider-openstack-acceptance-test-stein
    description: |
      Run terraform-provider-openstack of v1.19.0 acceptance test against stein branch of OpenStack
    override-checkout: v1.19.0
    tags:
      - Category:Cloud
      - Project:terraform-providers/terraform-provider-openstack
      - Application:terraform-provider-openstack@v1.19.0
      - Application:OpenStack@stein
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

### son job against rocky branch of OpenStack
- job:
    name: terraform-provider-openstack-acceptance-test-rocky
    parent: terraform-provider-openstack-acceptance-test
    description: |
      Run terraform-provider-openstack acceptance test against rocky branch of OpenStack
    vars:
      global_env:
        OS_BRANCH: stable/rocky
### grandson job pinned v1.19.0 against rocky branch of OpenStack
- job:
    name: terraform-provider-openstack-v1.19.0-acceptance-test-rocky
    parent: terraform-provider-openstack-acceptance-test-rocky
    description: |
      Run terraform-provider-openstack of v1.19.0 acceptance test against rocky branch of OpenStack
    override-checkout: v1.19.0
    tags:
      - Category:Cloud
      - Project:terraform-providers/terraform-provider-openstack
      - Application:terraform-provider-openstack@v1.19.0
      - Application:OpenStack@rocky
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

### son job against queens branch of OpenStack
- job:
    name: terraform-provider-openstack-acceptance-test-queens
    parent: terraform-provider-openstack-acceptance-test
    description: |
      Run terraform-provider-openstack acceptance test against queens branch of OpenStack
    vars:
      global_env:
        OS_BRANCH: stable/queens
### grandson job pinned v1.19.0 against queens branch of OpenStack
- job:
    name: terraform-provider-openstack-v1.19.0-acceptance-test-queens
    parent: terraform-provider-openstack-acceptance-test-queens
    description: |
      Run terraform-provider-openstack of v1.19.0 acceptance test against queens branch of OpenStack
    override-checkout: v1.19.0
    tags:
      - Category:Cloud
      - Project:terraform-providers/terraform-provider-openstack
      - Application:terraform-provider-openstack@v1.19.0
      - Application:OpenStack@queens
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

### son job against pike branch of OpenStack
- job:
    name: terraform-provider-openstack-acceptance-test-pike
    parent: terraform-provider-openstack-acceptance-test
    description: |
      Run terraform-provider-openstack acceptance test against pike branch of OpenStack
    vars:
      global_env:
        OS_BRANCH: stable/pike
### grandson job pinned v1.19.0 against pike branch of OpenStack
- job:
    name: terraform-provider-openstack-v1.19.0-acceptance-test-pike
    parent: terraform-provider-openstack-acceptance-test-pike
    description: |
      Run terraform-provider-openstack of v1.19.0 acceptance test against pike branch of OpenStack
    override-checkout: v1.19.0
    tags:
      - Category:Cloud
      - Project:terraform-providers/terraform-provider-openstack
      - Application:terraform-provider-openstack@v1.19.0
      - Application:OpenStack@pike
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

### son job against ocata branch of OpenStack
- job:
    name: terraform-provider-openstack-acceptance-test-ocata
    parent: terraform-provider-openstack-acceptance-test
    description: |
      Run terraform-provider-openstack acceptance test against ocata branch of OpenStack
    vars:
      global_env:
        OS_BRANCH: stable/ocata
### grandson job pinned v1.19.0 against ocata branch of OpenStack
- job:
    name: terraform-provider-openstack-v1.19.0-acceptance-test-ocata
    parent: terraform-provider-openstack-acceptance-test-ocata
    description: |
      Run terraform-provider-openstack of v1.19.0 acceptance test against ocata branch of OpenStack
    override-checkout: v1.19.0
    tags:
      - Category:Cloud
      - Project:terraform-providers/terraform-provider-openstack
      - Application:terraform-provider-openstack@v1.19.0
      - Application:OpenStack@ocata
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

### son job against newton branch of OpenStack
- job:
    name: terraform-provider-openstack-acceptance-test-newton
    parent: terraform-provider-openstack-acceptance-test
    description: |
      Run terraform-provider-openstack acceptance test against newton branch of OpenStack
    vars:
      global_env:
        OS_BRANCH: stable/newton
### grandson job pinned v1.19.0 against newton branch of OpenStack
- job:
    name: terraform-provider-openstack-v1.19.0-acceptance-test-newton
    parent: terraform-provider-openstack-acceptance-test-newton
    description: |
      Run terraform-provider-openstack of v1.19.0 acceptance test against newton branch of OpenStack
    override-checkout: v1.19.0
    tags:
      - Category:Cloud
      - Project:terraform-providers/terraform-provider-openstack
      - Application:terraform-provider-openstack@v1.19.0
      - Application:OpenStack@newton
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

### son job against mitaka branch of OpenStack
- job:
    name: terraform-provider-openstack-acceptance-test-mitaka
    parent: terraform-provider-openstack-acceptance-test
    description: |
      Run terraform-provider-openstack acceptance test against mitaka branch of OpenStack
    vars:
      global_env:
        OS_BRANCH: stable/mitaka
    nodeset: ubuntu-trusty
### grandson job pinned v1.19.0 against mitaka branch of OpenStack
- job:
    name: terraform-provider-openstack-v1.19.0-acceptance-test-mitaka
    parent: terraform-provider-openstack-acceptance-test-mitaka
    description: |
      Run terraform-provider-openstack of v1.19.0 acceptance test against mitaka branch of OpenStack
    override-checkout: v1.19.0
    tags:
      - Category:Cloud
      - Project:terraform-providers/terraform-provider-openstack
      - Application:terraform-provider-openstack@v1.19.0
      - Application:OpenStack@mitaka
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

- job:
    name: terraform-provider-openstack-acceptance-test-designate
    parent: golang-test
    description: |
      Run terraform-provider-openstack designate acceptance test on master branch
    run: playbooks/terraform-provider-openstack-acceptance-test-designate/run.yaml

- job:
    name: terraform-provider-openstack-acceptance-test-trove
    parent: golang-test
    description: |
      Run terraform-provider-openstack trove acceptance test on master branch
    run: playbooks/terraform-provider-openstack-acceptance-test-trove/run.yaml

- job:
    name: terraform-provider-openstack-acceptance-test-lbaas
    parent: golang-test
    description: |
      Run terraform-provider-openstack lbaas acceptance test on master branch
    run: playbooks/terraform-provider-openstack-acceptance-test-lbaas/run.yaml

- job:
    name: terraform-provider-openstack-acceptance-test-fwaas
    parent: golang-test
    description: |
      Run terraform-provider-openstack fwaas acceptance test on master branch
    run: playbooks/terraform-provider-openstack-acceptance-test-fwaas/run.yaml

# terraform-provider-openstack acceptance tests with Telefonica cloud
- job:
    name: terraform-provider-openstack-acceptance-test-telefonica
    parent: golang-test
    description: |
      Run acceptance tests of terraform-provider-openstack repo against telefonica cloud
    run: playbooks/terraform-provider-openstack-acceptance-test-public-clouds/run.yaml
    post-run: playbooks/terraform-provider-openstack-acceptance-test-public-clouds/post.yaml
    secrets:
      - telefonica_credentials
    vars:
      cloud_name: telefonica

# terraform-provider-openstack acceptance tests with Open Telekom cloud
- job:
    name: terraform-provider-openstack-acceptance-test-opentelekomcloud
    parent: golang-test
    description: |
      Run acceptance tests of terraform-provider-openstack repo against opentelekomcloud
    run: playbooks/terraform-provider-openstack-acceptance-test-public-clouds/run.yaml
    post-run: playbooks/terraform-provider-openstack-acceptance-test-public-clouds/post.yaml
    secrets:
      - opentelekomcloud_credentials
    vars:
      cloud_name: opentelekomcloud

# terraform-provider-openstack acceptance tests with orange cloud
- job:
    name: terraform-provider-openstack-acceptance-test-orange
    parent: golang-test
    description: |
      Run acceptance tests of terraform-provider-openstack repo against orange cloud
    run: playbooks/terraform-provider-openstack-acceptance-test-public-clouds/run.yaml
    post-run: playbooks/terraform-provider-openstack-acceptance-test-public-clouds/post.yaml
    secrets:
      - orange_credentials
    vars:
      cloud_name: orange

# terraform-provider-openstack acceptance tests with huawei cloud, now the job is disabled
- job:
    name: terraform-provider-openstack-acceptance-test-huaweicloud
    parent: golang-test
    description: |
      Run acceptance tests of terraform-provider-openstack repo against huaweicloud
    run: playbooks/terraform-provider-openstack-acceptance-test-public-clouds/run.yaml
    post-run: playbooks/terraform-provider-openstack-acceptance-test-public-clouds/post.yaml
    secrets:
      - huaweicloud_credentials
    vars:
      cloud_name: huaweicloud

# Gophercloud acceptance tests with Telefonica cloud, now the job is disabled
- job:
    name: gophercloud-acceptance-test-telefonica
    parent: golang-test
    description: |
      Run gophercloud acceptance test against telefonica cloud
    run: playbooks/gophercloud-acceptance-test-telefonica/run.yaml
    secrets:
      - telefonica_credentials

## ========== gophercloud + openstack jobs ==============
## grandson job for stein
- job:
    name: gophercloud-v0.4.0-acceptance-test-stein
    parent: gophercloud-acceptance-test-stein
    description: |
      Run gophercloud v0.4.0 acceptance test on stein branch of OpenStack
    override-checkout: v0.4.0
    tags:
      - Category:Cloud
      - Project:gophercloud/gophercloud
      - Application:gophercloud@v0.4.0
      - Application:OpenStack@stein
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

## grandson job for rocky
- job:
    name: gophercloud-v0.4.0-acceptance-test-rocky
    parent: gophercloud-acceptance-test-rocky
    description: |
      Run gophercloud v0.4.0 acceptance test on rocky branch of OpenStack
    override-checkout: v0.4.0
    tags:
      - Category:Cloud
      - Project:gophercloud/gophercloud
      - Application:gophercloud@v0.4.0
      - Application:OpenStack@rocky
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

## grandson job for queens
- job:
    name: gophercloud-v0.4.0-acceptance-test-queens
    parent: gophercloud-acceptance-test-queens
    description: |
      Run gophercloud v0.4.0 acceptance test on queens branch of OpenStack
    override-checkout: v0.4.0
    tags:
      - Category:Cloud
      - Project:gophercloud/gophercloud
      - Application:gophercloud@v0.4.0
      - Application:OpenStack@queens
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

## grandson job for pike
- job:
    name: gophercloud-v0.4.0-acceptance-test-pike
    parent: gophercloud-acceptance-test-pike
    description: |
      Run gophercloud v0.4.0 acceptance test on pike branch of OpenStack
    override-checkout: v0.4.0
    tags:
      - Category:Cloud
      - Project:gophercloud/gophercloud
      - Application:gophercloud@v0.4.0
      - Application:OpenStack@pike
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

## grandson job for ocata
- job:
    name: gophercloud-v0.4.0-acceptance-test-ocata
    parent: gophercloud-acceptance-test-ocata
    description: |
      Run gophercloud v0.4.0 acceptance test on ocata branch of OpenStack
    override-checkout: v0.4.0
    tags:
      - Category:Cloud
      - Project:gophercloud/gophercloud
      - Application:gophercloud@v0.4.0
      - Application:OpenStack@ocata
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

## grandson job for newton
- job:
    name: gophercloud-v0.4.0-acceptance-test-newton
    parent: gophercloud-acceptance-test-newton
    description: |
      Run gophercloud v0.4.0 acceptance test on newton branch of OpenStack
    override-checkout: v0.4.0
    tags:
      - Category:Cloud
      - Project:gophercloud/gophercloud
      - Application:gophercloud@v0.4.0
      - Application:OpenStack@newton
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

## grandson job for mitaka
- job:
    name: gophercloud-v0.4.0-acceptance-test-mitaka
    parent: gophercloud-acceptance-test-mitaka
    description: |
      Run gophercloud v0.4.0 acceptance test on mitaka branch of OpenStack
    override-checkout: v0.4.0
    tags:
      - Category:Cloud
      - Project:gophercloud/gophercloud
      - Application:gophercloud@v0.4.0
      - Application:OpenStack@mitaka
      - Application:Go@1.12.1
      - Arch:x86_64
      - OS:ubuntu-xenial
      - BuildType:Integration test

# terraform-provider-telefonicaopencloud acceptance tests with Telefonica cloud
# the job is disabled now
- job:
    name: terraform-provider-telefonicaopencloud-acceptance-test-telefonica
    parent: golang-test
    description: |
      Run acceptance tests of terraform-provider-telefonicaopencloud repo against telefonica cloud
    run: playbooks/terraform-provider-telefonicaopencloud-acceptance-test-telefonica/run.yaml
    secrets:
      - telefonica_credentials

# terraform-provider-flexibleengine acceptance tests with orange cloud
# the job is disabled now
- job:
    name: terraform-provider-flexibleengine-acceptance-test-orange
    parent: golang-test
    description: |
      Run acceptance tests of terraform-provider-flexibleengine repo against orange cloud
    run: playbooks/terraform-provider-flexibleengine-acceptance-test-orange/run.yaml
    secrets:
      - orange_credentials

# terraform-provider-opentelekomcloud acceptance tests with Open Telekom cloud
# the job is disabled now
- job:
    name: terraform-provider-opentelekomcloud-acceptance-test-opentelekomcloud
    parent: golang-test
    description: |
      Run acceptance tests of terraform-provider-opentelekomcloud repo against open telekom cloud
    run: playbooks/terraform-provider-opentelekomcloud-acceptance-test-opentelekomcloud/run.yaml
    secrets:
      - opentelekomcloud_credentials

# OpenLab job self-check jobs
- job:
    name: openlab-zuul-jobs-check
    parent: init-test
    description: |
      This job runs against project-config, openlab-zuul-jobs and zuul-jobs
      so we can properly lint our ansible playbooks / roles
    required-projects:
      - theopenlab/openlab-zuul-jobs
      - theopenlab/project-config
      - theopenlab/zuul-jobs
    run: playbooks/openlab-zuul-jobs-check/run.yaml
    vars:
      excluded_path: "playbooks/base/*"
    nodeset: ubuntu-xenial-ut

# Deprecated (Kubernetes nested scenario)
- job:
    name: cloud-provider-openstack-unittest-nested
    parent: golang-test
    description: |
      Run Kubernetes openstack-cloud-controller-manager unit test in devstack instance
    run: playbooks/cloud-provider-openstack-unittest-nested/run.yaml
    nodeset: ubuntu-xenial

# Kubernetes cloud-provider-openstack jobs
- job:
    name: cloud-provider-openstack-test
    parent: golang-test
    description: |
      Base job for all types of cloud-provider-openstack test jobs
    pre-run: playbooks/cloud-provider-openstack-test/pre.yaml
    post-run: playbooks/cloud-provider-openstack-test/post.yaml
    secrets:
      - citynetwork_credentials
    vars:
      k8s_os_provider_src_dir: '{{ ansible_user_dir }}/src/k8s.io/cloud-provider-openstack'
      k8s_src_dir: '{{ ansible_user_dir }}/src/k8s.io/kubernetes'
      k8s_log_dir: '{{ ansible_user_dir }}/workspace/logs/kubernetes'
      kubectl: '{{ ansible_user_dir }}/src/k8s.io/kubernetes/cluster/kubectl.sh'
      cloud_name: citynetwork

- job:
    name: cloud-provider-openstack-unittest
    parent: cloud-provider-openstack-test
    description: |
      Run unit test of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-unittest/run.yaml
    nodeset: ubuntu-xenial-citynetwork
    secrets:
      - citynetwork_credentials

- job:
    name: cloud-provider-openstack-format
    parent: cloud-provider-openstack-test
    description: |
      Run gofmt and typo checking of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-format/run.yaml
    nodeset: ubuntu-xenial-ut

- job:
    name: cloud-provider-openstack-acceptance-test-k8s-cinder
    parent: cloud-provider-openstack-test
    description: |
      Run cinder in-tree acceptance tests of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-acceptance-test-k8s-cinder/run.yaml
    post-run: playbooks/cloud-provider-openstack-acceptance-test-k8s-cinder/post.yaml
    nodeset: ubuntu-xenial-citynetwork
    secrets:
      - citynetwork_credentials

- job:
    name: cloud-provider-openstack-acceptance-test-e2e-conformance
    parent: cloud-provider-openstack-test
    description: |
      Run Kubernetes E2E Conformance tests against Kubernetes master
    vars:
      go_version: '1.12.4'
    run: playbooks/cloud-provider-openstack-acceptance-test-e2e-conformance/run.yaml
    post-run: playbooks/cloud-provider-openstack-acceptance-test-e2e-conformance/post.yaml
    nodeset: ubuntu-xenial-citynetwork
    secrets:
      - citynetwork_credentials
      - gcp_account
      - dockerhub

- job:
    name: cloud-provider-openstack-acceptance-test-e2e-conformance-stable-branch-v1.10
    parent: cloud-provider-openstack-acceptance-test-e2e-conformance
    description: |
      Run Kubernetes E2E Conformance tests against Kubernetes v1.10
    vars:
      go_version: '1.9.3'
      k8s_version: 'release-1.10'

- job:
    name: cloud-provider-openstack-acceptance-test-e2e-conformance-stable-branch-v1.11
    parent: cloud-provider-openstack-acceptance-test-e2e-conformance
    description: |
      Run Kubernetes E2E Conformance tests against Kubernetes v1.11
    vars:
      go_version: '1.10.3'
      k8s_version: 'release-1.11'

- job:
    name: cloud-provider-openstack-acceptance-test-e2e-conformance-stable-branch-v1.12
    parent: cloud-provider-openstack-acceptance-test-e2e-conformance
    description: |
      Run Kubernetes E2E Conformance tests against release-1.12 branch of Kubernetes
    vars:
      go_version: '1.10.8'
      k8s_version: 'release-1.12'
    tags:
      - Category:Cloud
      - Project:kubernetes/cloud-provider-openstack
      - Application:cloud-provider-openstack@release-1.12
      - Application:Kubernetes@release-1.12
      - Application:Docker.io@v18.09
      - Application:Etcd@v3.3.10
      - Application:Go@1.10.8
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

- job:
    name: cloud-provider-openstack-acceptance-test-e2e-conformance-stable-branch-v1.13
    parent: cloud-provider-openstack-acceptance-test-e2e-conformance
    description: |
      Run Kubernetes E2E Conformance tests against release-1.13 branch of Kubernetes
    nodeset: ubuntu-xenial-citynetwork
    vars:
      go_version: '1.12'
      k8s_version: 'release-1.13'
      etcd_version: 'v3.3.10'
    tags:
      - Category:Cloud
      - Project:kubernetes/cloud-provider-openstack
      - Application:cloud-provider-openstack@release-1.13
      - Application:Kubernetes@release-1.13
      - Application:Docker.io@v18.09
      - Application:Etcd@v3.3.10
      - Application:Go@1.12
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

- job:
    name: cloud-provider-openstack-acceptance-test-e2e-conformance-stable-branch-v1.14
    parent: cloud-provider-openstack-acceptance-test-e2e-conformance
    description: |
      Run Kubernetes E2E Conformance tests against release-1.14 branch of Kubernetes
    nodeset: ubuntu-xenial-citynetwork
    vars:
      go_version: '1.12.1'
      k8s_version: 'release-1.14'
      etcd_version: 'v3.3.10'
    tags:
      - Category:Cloud
      - Project:kubernetes/cloud-provider-openstack
      - Application:cloud-provider-openstack@release-1.14
      - Application:Kubernetes@release-1.14
      - Application:Docker.io@v18.09
      - Application:Etcd@v3.3.10
      - Application:Go@1.12.1
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test
      
- job:
    name: cloud-provider-openstack-acceptance-test-e2e-conformance-stable-branch-v1.15
    parent: cloud-provider-openstack-acceptance-test-e2e-conformance
    description: |
      Run Kubernetes E2E Conformance tests against release-1.15 branch of Kubernetes
    nodeset: ubuntu-xenial-citynetwork
    vars:
      go_version: '1.12.1'
      k8s_version: 'release-1.15'
      etcd_version: 'v3.3.10'
    tags:
      - Category:Cloud
      - Project:kubernetes/cloud-provider-openstack
      - Application:cloud-provider-openstack@release-1.15
      - Application:Kubernetes@release-1.15
      - Application:Docker.io@v18.09
      - Application:Etcd@v3.3.10
      - Application:Go@1.12.1
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

- job:
    name: cloud-provider-openstack-acceptance-test-standalone-cinder
    parent: cloud-provider-openstack-test
    description: |
      Run cinder standalone acceptance tests of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-acceptance-test-standalone-cinder/run.yaml
    post-run: playbooks/cloud-provider-openstack-acceptance-test-standalone-cinder/post.yaml
    nodeset: ubuntu-xenial

- job:
    name: cloud-provider-openstack-acceptance-test-csi-cinder
    parent: cloud-provider-openstack-test
    description: |
      Run cinder csi acceptance tests of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-acceptance-test-csi-cinder/run.yaml
    post-run: playbooks/cloud-provider-openstack-acceptance-test-csi-cinder/post.yaml
    nodeset: ubuntu-xenial-citynetwork
    secrets:
      - citynetwork_credentials

- job:
    name: cloud-provider-openstack-acceptance-test-manila-provisioner
    parent: cloud-provider-openstack-test
    description: |
      Run Manila provisioner acceptance tests of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-acceptance-test-manila-provisioner/run.yaml
    post-run: playbooks/cloud-provider-openstack-acceptance-test-manila-provisioner/post.yaml
    nodeset: ubuntu-xenial

# TODO(wxy): Delete this base job once lb job is moved to citynetwork.
- job:
    name: cloud-provider-openstack-test-lb
    parent: golang-test
    description: |
      Base job for all types of cloud-provider-openstack-acceptance-test-lb-octavia test jobs
    pre-run: playbooks/cloud-provider-openstack-test/pre.yaml
    post-run: playbooks/cloud-provider-openstack-test/post.yaml
    secrets:
      - vexxhost_credentials
    vars:
      k8s_os_provider_src_dir: '{{ ansible_user_dir }}/src/k8s.io/cloud-provider-openstack'
      k8s_src_dir: '{{ ansible_user_dir }}/src/k8s.io/kubernetes'
      k8s_log_dir: '{{ ansible_user_dir }}/workspace/logs/kubernetes'
      kubectl: '{{ ansible_user_dir }}/src/k8s.io/kubernetes/cluster/kubectl.sh'
      cloud_name: vexxhost

# TODO(wxy): Move lb test to citynetwork once octavia is available on
# citynetwork.
- job:
    name: cloud-provider-openstack-acceptance-test-lb-octavia
    parent: cloud-provider-openstack-test-lb
    description: |
      Run lb acceptance tests of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-acceptance-test-lb-octavia/run.yaml
    post-run: playbooks/cloud-provider-openstack-acceptance-test-lb-octavia/post.yaml
    nodeset: ubuntu-xenial-vexxhost-lb
    secrets:
      - vexxhost_credentials

- job:
    name: cloud-provider-openstack-acceptance-test-keystone-authentication-authorization
    parent: cloud-provider-openstack-test
    description: |
      Run keystone auth acceptance tests of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-acceptance-test-keystone-authentication-authorization/run.yaml
    nodeset: ubuntu-xenial

- job:
    name: cloud-provider-openstack-acceptance-test-flexvolume-cinder
    parent: cloud-provider-openstack-test
    description: |
      Run cinder flexvolume acceptance tests of cloud-provider-openstack
    run: playbooks/cloud-provider-openstack-acceptance-test-flexvolume-cinder/run.yaml
    nodeset: ubuntu-xenial

- job:
    name: cluster-api-provider-openstack-image-build
    parent: cloud-provider-openstack-test
    description: |
      Run the image build and publish jobs
    run: playbooks/cluster-api-provider-openstack-image-build/run.yaml
    vars:
      k8s_cluster_api_provider_os_src_dir: '{{ ansible_user_dir }}/src/sigs.k8s.io/cluster-api-provider-openstack'
    nodeset: ubuntu-xenial
    secrets:
      - dockerhub

# ansible jobs
- job: # Deprecated
    name: openstacksdk-ansible-devel-functional-devstack
    parent: init-test
    description: |
      Run openstacksdk ansible functional tests against a master OpenStack with devel branch of ansible.
    run: playbooks/ansible-functional-devstack/run.yaml
    required-projects:
      - openstack/openstacksdk
    override-checkout: devel
    vars:
      os_sdk: openstacksdk

# Ansible base job
- job:
    name: openstacksdk-ansible-functional-devstack
    parent: init-test
    description: |
      Run openstacksdk ansible functional tests against master OpenStack with devel branch of ansible.
    run: playbooks/ansible-functional-devstack/run.yaml
    required-projects:
      - openstack/openstacksdk
    vars:
      os_sdk: openstacksdk

# Ansible son job for stein
- job:
    name: openstacksdk-ansible-functional-devstack-stein
    parent: openstacksdk-ansible-functional-devstack
    description: |
      Run openstacksdk ansible functional tests against stein OpenStack with devel branch of ansible.
    vars:
      global_env:
        OS_BRANCH: stable/stein
# Ansible grandson job for stein
- job:
    name: openstacksdk-ansible-v2.8.0-functional-devstack-stein
    parent: openstacksdk-ansible-functional-devstack-stein
    description: |
      Run openstacksdk ansible functional tests against stein OpenStack with ansible v2.8.0.
    override-checkout: v2.8.0 #tag
    tags:
      - Category:Cloud
      - Project:ansible/ansible
      - Application:Ansible@v2.8.0
      - Application:OpenStack@stein
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# Ansible son job for rocky
- job:
    name: openstacksdk-ansible-functional-devstack-rocky
    parent: openstacksdk-ansible-functional-devstack
    description: |
      Run openstacksdk ansible functional tests against rocky OpenStack with devel branch of ansible.
    vars:
      global_env:
        OS_BRANCH: stable/rocky
# Ansible grandson job for rocky
- job:
    name: openstacksdk-ansible-v2.8.0-functional-devstack-rocky
    parent: openstacksdk-ansible-functional-devstack-rocky
    description: |
      Run openstacksdk ansible functional tests against rocky OpenStack with ansible v2.8.0.
    override-checkout: v2.8.0
    tags:
      - Category:Cloud
      - Project:ansible/ansible
      - Application:Ansible@v2.8.0
      - Application:OpenStack@rocky
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# Ansible son job for queens
- job:
    name: openstacksdk-ansible-functional-devstack-queens
    parent: openstacksdk-ansible-functional-devstack
    description: |
      Run openstacksdk ansible functional tests against queens OpenStack with devel branch of ansible.
    vars:
      global_env:
        OS_BRANCH: stable/queens
# Ansible grandson job for queens
- job:
    name: openstacksdk-ansible-v2.8.0-functional-devstack-queens
    parent: openstacksdk-ansible-functional-devstack-queens
    description: |
      Run openstacksdk ansible functional tests against queens OpenStack with ansible v2.8.0.
    override-checkout: v2.8.0
    tags:
      - Category:Cloud
      - Project:ansible/ansible
      - Application:Ansible@v2.8.0
      - Application:OpenStack@queens
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# Ansible son job for pike
- job:
    name: openstacksdk-ansible-functional-devstack-pike
    parent: openstacksdk-ansible-functional-devstack
    description: |
      Run openstacksdk ansible functional tests against pike OpenStack with devel branch of ansible.
    vars:
      global_env:
        OS_BRANCH: stable/pike
# Ansible grandson job for pike
- job:
    name: openstacksdk-ansible-v2.8.0-functional-devstack-pike
    parent: openstacksdk-ansible-functional-devstack-pike
    description: |
      Run openstacksdk ansible functional tests against pike OpenStack with ansible v2.8.0.
    override-checkout: v2.8.0
    tags:
      - Category:Cloud
      - Project:ansible/ansible
      - Application:Ansible@v2.8.0
      - Application:OpenStack@pike
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# Ansible son job for ocata
- job:
    name: openstacksdk-ansible-functional-devstack-ocata
    parent: openstacksdk-ansible-functional-devstack
    description: |
      Run openstacksdk ansible functional tests against ocata OpenStack with devel branch of ansible.
    vars:
      global_env:
        OS_BRANCH: stable/ocata
# Ansible grandson job for ocata
- job:
    name: openstacksdk-ansible-v2.8.0-functional-devstack-ocata
    parent: openstacksdk-ansible-functional-devstack-ocata
    description: |
      Run openstacksdk ansible functional tests against ocata OpenStack with ansible v2.8.0.
    override-checkout: v2.8.0
    tags:
      - Category:Cloud
      - Project:ansible/ansible
      - Application:Ansible@v2.8.0
      - Application:OpenStack@ocata
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# Ansible son job for newton
- job:
    name: openstacksdk-ansible-functional-devstack-newton
    parent: openstacksdk-ansible-functional-devstack
    description: |
      Run openstacksdk ansible functional tests against newton OpenStack with devel branch of ansible.
    vars:
      global_env:
        OS_BRANCH: stable/newton
# Ansible grandson job for newton
- job:
    name: openstacksdk-ansible-v2.8.0-functional-devstack-newton
    parent: openstacksdk-ansible-functional-devstack-newton
    description: |
      Run openstacksdk ansible functional tests against newton OpenStack with ansible v2.8.0.
    override-checkout: v2.8.0
    tags:
      - Category:Cloud
      - Project:ansible/ansible
      - Application:Ansible@v2.8.0
      - Application:OpenStack@newton
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# Ansible son job for mitaka
- job:
    name: openstacksdk-ansible-functional-devstack-mitaka
    parent: openstacksdk-ansible-functional-devstack
    description: |
      Run openstacksdk ansible functional tests against mitaka OpenStack with devel branch of ansible.
    run: playbooks/ansible-functional-devstack/run.yaml
    vars:
      global_env:
        OS_BRANCH: stable/mitaka
    nodeset: ubuntu-trusty
# Ansible grandson job for mitaka
- job:
    name: openstacksdk-ansible-v2.8.0-functional-devstack-mitaka
    parent: openstacksdk-ansible-functional-devstack-mitaka
    description: |
      Run openstacksdk ansible functional tests against mitaka OpenStack with ansible v2.8.0.
    override-checkout: v2.8.0
    tags:
      - Category:Cloud
      - Project:ansible/ansible
      - Application:Ansible@v2.8.0
      - Application:OpenStack@mitaka
      - OS:ubuntu-trusty
      - Arch:x86_64
      - BuildType:Integration test

# the job is disabled
- job:
    name: shade-ansible-functional-devstack
    parent: init-test
    description: |
      Run shade ansible functional tests against a master devstack using git stable-2.5 branch version of ansible.
    run: playbooks/ansible-functional-devstack/run.yaml
    required-projects:
      - openstack/shade
    override-checkout: stable-2.5
    vars:
      os_sdk: shade

# the job is disabled
- job:
    name: openstacksdk-ansible-functional-opentelekomcloud
    parent: init-test
    description: |
      Run openstacksdk ansible functional tests against a opentelekomcloud using git stable-2.7 branch version of ansible.
    run: playbooks/ansible-functional-public-clouds/run.yaml
    required-projects:
      - openstack/openstacksdk
    override-checkout: stable-2.7
    vars:
      cloud_name: opentelekomcloud
      os_sdk: openstacksdk
      # Disable public cloud policy limit roles: group keystone_domain keystone_role nova_flavor user user_group
      test_cases: auth image keypair network object port router security_group server subnet volume
    secrets:
      - opentelekomcloud_credentials

# the job is disabled
- job:
    name: openstacksdk-ansible-functional-orange
    parent: init-test
    description: |
      Run openstacksdk ansible functional tests against orange cloud using git stable-2.7 branch version of ansible.
    run: playbooks/ansible-functional-public-clouds/run.yaml
    required-projects:
      - openstack/openstacksdk
    override-checkout: stable-2.7
    vars:
      cloud_name: orange
      os_sdk: openstacksdk
      # Disable public cloud policy limit roles: group keystone_domain keystone_role nova_flavor user user_group object
      test_cases: auth image keypair network port router security_group server subnet volume
    secrets:
      - orange_credentials

# the job is disabled
- job:
    name: openstacksdk-ansible-functional-telefonica
    parent: init-test
    description: |
      Run openstacksdk ansible functional tests against telefonica cloud using git stable-2.7 branch version of ansible.
    run: playbooks/ansible-functional-public-clouds/run.yaml
    required-projects:
      - openstack/openstacksdk
    override-checkout: stable-2.7
    vars:
      cloud_name: telefonica
      os_sdk: openstacksdk
      # Disable public cloud policy limit roles: group keystone_domain keystone_role nova_flavor user user_group object
      test_cases: auth image keypair network port router security_group server subnet volume
    secrets:
      - telefonica_credentials

# the job is disabled now
- job:
    name: openstacksdk-ansible-functional-huaweicloud
    parent: init-test
    description: |
      Run openstacksdk ansible functional tests against huaweicloud using git stable-2.7 branch version of ansible.
    run: playbooks/ansible-functional-public-clouds/run.yaml
    required-projects:
      - openstack/openstacksdk
    override-checkout: stable-2.7
    vars:
      cloud_name: huaweicloud
      os_sdk: openstacksdk
      # Disable public cloud policy limit roles: group keystone_domain keystone_role nova_flavor user user_group object
      test_cases: auth image keypair network port router security_group server subnet volume
    secrets:
      - huaweicloud_credentials

# packer jobs
# the job is disabled
- job:
    name: packer-functional-opentelekomcloud
    parent: init-test
    description: |
      Test image building functionality of Packer of v1.3.3 against opentelekomcloud.
    run: playbooks/packer-functional-public-clouds/run.yaml
    vars:
      cloud_name: opentelekomcloud
    secrets:
      - opentelekomcloud_credentials
    override-checkout: v1.3.3

# the job is disabled
- job:
    name: packer-functional-orange
    parent: init-test
    description: |
      Test image building functionality of Packer of v1.3.3 against orange.
    run: playbooks/packer-functional-public-clouds/run.yaml
    vars:
      cloud_name: orange
    secrets:
      - orange_credentials
    override-checkout: v1.3.3

# the job is disabled
- job:
    name: packer-functional-telefonica
    parent: init-test
    description: |
      Test image building functionality of Packer of v1.3.3 against telefonica.
    run: playbooks/packer-functional-public-clouds/run.yaml
    vars:
      cloud_name: telefonica
    secrets:
      - telefonica_credentials
    override-checkout: v1.3.3

# the job is disabled
- job:
    name: packer-functional-huaweicloud
    parent: init-test
    description: |
      Test image building functionality of Packer of v1.3.3 against huaweicloud.
    run: playbooks/packer-functional-public-clouds/run.yaml
    vars:
      cloud_name: huaweicloud
    secrets:
      - huaweicloud_credentials
    override-checkout: v1.3.3

# parent job
- job:
    name: packer-functional-devstack
    parent: init-test
    description: |
      Test image building functionality of master Packer against master OpenStack.
    run: playbooks/packer-functional-devstack/run.yaml

# son job for stein
- job:
    name: packer-functional-devstack-stein
    parent: packer-functional-devstack
    description: |
      Test image building functionality of master Packer against stein branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/stein
# grandson job for stein
- job:
    name: packer-v1.4.1-functional-devstack-stein
    parent: packer-functional-devstack-stein
    description: |
      Test image building functionality of v1.4.1 Packer against stein branch of OpenStack.
    override-checkout: v1.4.1
    tags:
      - Category:Cloud
      - Project:hashicorp/packer
      - Application:Packer@v1.4.1
      - Application:OpenStack@stein
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for rocky
- job:
    name: packer-functional-devstack-rocky
    parent: packer-functional-devstack
    description: |
      Test image building functionality of master Packer against rocky branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/rocky
# grandson job for rocky
- job:
    name: packer-v1.4.1-functional-devstack-rocky
    parent: packer-functional-devstack-rocky
    description: |
      Test image building functionality of v1.4.1 Packer against rocky branch of OpenStack.
    override-checkout: v1.4.1
    tags:
      - Category:Cloud
      - Project:hashicorp/packer
      - Application:Packer@v1.4.1
      - Application:OpenStack@rocky
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for queens
- job:
    name: packer-functional-devstack-queens
    parent: packer-functional-devstack
    description: |
      Test image building functionality of master Packer against queens branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/queens
# grandson job for queens
- job:
    name: packer-v1.4.1-functional-devstack-queens
    parent: packer-functional-devstack-queens
    description: |
      Test image building functionality of v1.4.1 Packer against queens branch of OpenStack.
    override-checkout: v1.4.1
    tags:
      - Category:Cloud
      - Project:hashicorp/packer
      - Application:Packer@v1.4.1
      - Application:OpenStack@queens
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for pike
- job:
    name: packer-functional-devstack-pike
    parent: packer-functional-devstack
    description: |
      Test image building functionality of master Packer against pike branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/pike
# grandson job for pike
- job:
    name: packer-v1.4.1-functional-devstack-pike
    parent: packer-functional-devstack-pike
    description: |
      Test image building functionality of v1.4.1 Packer against pike branch of OpenStack.
    override-checkout: v1.4.1
    tags:
      - Category:Cloud
      - Project:hashicorp/packer
      - Application:Packer@v1.4.1
      - Application:OpenStack@pike
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for ocata
- job:
    name: packer-functional-devstack-ocata
    parent: packer-functional-devstack
    description: |
      Test image building functionality of master Packer against ocata branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/ocata
# grandson job for ocata
- job:
    name: packer-v1.4.1-functional-devstack-ocata
    parent: packer-functional-devstack-ocata
    description: |
      Test image building functionality of v1.4.1 Packer against ocata branch of OpenStack.
    override-checkout: v1.4.1
    tags:
      - Category:Cloud
      - Project:hashicorp/packer
      - Application:Packer@v1.4.1
      - Application:OpenStack@ocata
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for newton
- job:
    name: packer-functional-devstack-newton
    parent: packer-functional-devstack
    description: |
      Test image building functionality of master Packer against newton branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/newton
# grandson job for newton
- job:
    name: packer-v1.4.1-functional-devstack-newton
    parent: packer-functional-devstack-newton
    description: |
      Test image building functionality of v1.4.1 Packer against newton branch of OpenStack.
    override-checkout: v1.4.1
    tags:
      - Category:Cloud
      - Project:hashicorp/packer
      - Application:Packer@v1.4.1
      - Application:OpenStack@newton
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for mitaka
- job:
    name: packer-functional-devstack-mitaka
    parent: packer-functional-devstack
    description: |
      Test image building functionality of master Packer against mitaka branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/mitaka
    nodeset: ubuntu-trusty
# grandson job for mitaka
- job:
    name: packer-v1.4.1-functional-devstack-mitaka
    parent: packer-functional-devstack-mitaka
    description: |
      Test image building functionality of v1.4.1 Packer against mitaka branch of OpenStack.
    override-checkout: v1.4.1
    tags:
      - Category:Cloud
      - Project:hashicorp/packer
      - Application:Packer@v1.4.1
      - Application:OpenStack@mitaka
      - OS:ubuntu-trusty
      - Arch:x86_64
      - BuildType:Integration test

# docker machine jobs
# the job is disabled now
- job:
    name: docker-machine-functional-opentelekomcloud
    parent: init-test
    description: |
      Test functionalities of Docker machine of v0.16.1 version against opentelekomcloud.
    run: playbooks/docker-machine-functional-public-clouds/run.yaml
    vars:
      cloud_name: opentelekomcloud
    override-checkout: v0.16.1
    secrets:
      - opentelekomcloud_credentials

# the job is disabled now
- job:
    name: docker-machine-functional-orange
    parent: init-test
    description: |
      Test functionalities of Docker machine of v0.16.1 version against orange.
    run: playbooks/docker-machine-functional-public-clouds/run.yaml
    vars:
      cloud_name: orange
    override-checkout: v0.16.1
    secrets:
      - orange_credentials

# the job is disabled now
- job:
    name: docker-machine-functional-telefonica
    parent: init-test
    description: |
      Test functionalities of Docker machine of v0.16.1 version against telefonica.
    run: playbooks/docker-machine-functional-public-clouds/run.yaml
    vars:
      cloud_name: telefonica
      ssh_user: linux
    override-checkout: v0.16.1
    secrets:
      - telefonica_credentials

# the job is disabled now
- job:
    name: docker-machine-functional-huaweicloud
    parent: init-test
    description: |
      Test functionalities of Docker machine of v0.16.1 version against huaweicloud.
    run: playbooks/docker-machine-functional-public-clouds/run.yaml
    vars:
      cloud_name: huaweicloud
    override-checkout: v0.16.1
    secrets:
      - huaweicloud_credentials

# parent job
- job:
    name: docker-machine-functional-devstack
    parent: init-test
    description: |
      Test image building functionality of master Docker machine against master OpenStack.
    run: playbooks/docker-machine-functional-devstack/run.yaml

# son jor for mitaka
- job:
    name: docker-machine-functional-devstack-mitaka
    parent: docker-machine-functional-devstack
    description: |
      Test image building functionality of master Docker machine against mitaka branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/mitaka
    nodeset: ubuntu-trusty
# grandson job for mitaka
- job:
    name: docker-machine-v0.16.1-functional-devstack-mitaka
    parent: docker-machine-functional-devstack-mitaka
    description: |
      Test image building functionality of v0.16.1 Docker machine against mitaka branch of OpenStack.
    override-checkout: v0.16.1
    tags:
      - Category:Cloud
      - Project:docker/machine
      - Application:Docker Machine@v0.16.1
      - Application:Docker@18.06
      - Application:Go@1.12.1
      - Application:OpenStack@mitaka
      - OS:ubuntu-trusty
      - Arch:x86_64
      - BuildType:Integration test

# son job for newton
- job:
    name: docker-machine-functional-devstack-newton
    parent: docker-machine-functional-devstack
    description: |
      Test image building functionality of master Docker machine against newton branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/newton
# grandson job for newton
- job:
    name: docker-machine-v0.16.1-functional-devstack-newton
    parent: docker-machine-functional-devstack-newton
    description: |
      Test image building functionality of v0.16.1 Docker machine against newton branch of OpenStack.
    override-checkout: v0.16.1
    tags:
      - Category:Cloud
      - Project:docker/machine
      - Application:Docker Machine@v0.16.1
      - Application:OpenStack@newton
      - Application:Docker@18.06
      - Application:Go@1.12.1
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for ocata
- job:
    name: docker-machine-functional-devstack-ocata
    parent: docker-machine-functional-devstack
    description: |
      Test image building functionality of master Docker machine against ocata branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/ocata
# grandson job for ocata
- job:
    name: docker-machine-v0.16.1-functional-devstack-ocata
    parent: docker-machine-functional-devstack-ocata
    description: |
      Test image building functionality of v0.16.1 Docker machine against ocata branch of OpenStack.
    override-checkout: v0.16.1
    tags:
      - Category:Cloud
      - Project:docker/machine
      - Application:Docker Machine@v0.16.1
      - Application:OpenStack@ocata
      - Application:Docker@18.06
      - Application:Go@1.12.1
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for pike
- job:
    name: docker-machine-functional-devstack-pike
    parent: docker-machine-functional-devstack
    description: |
      Test image building functionality of master Docker machine against pike branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/pike
# grandson job for pike
- job:
    name: docker-machine-v0.16.1-functional-devstack-pike
    parent: docker-machine-functional-devstack-pike
    description: |
      Test image building functionality of v0.16.1 Docker machine against pike branch of OpenStack.
    override-checkout: v0.16.1
    tags:
      - Category:Cloud
      - Project:docker/machine
      - Application:Docker Machine@v0.16.1
      - Application:OpenStack@pike
      - Application:Docker@18.06
      - Application:Go@1.12.1
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for queens
- job:
    name: docker-machine-functional-devstack-queens
    parent: docker-machine-functional-devstack
    description: |
      Test image building functionality of master Docker machine against queens branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/queens
# grandson job for queens
- job:
    name: docker-machine-v0.16.1-functional-devstack-queens
    parent: docker-machine-functional-devstack-queens
    description: |
      Test image building functionality of v0.16.1 Docker machine against queens branch of OpenStack.
    override-checkout: v0.16.1
    tags:
      - Category:Cloud
      - Project:docker/machine
      - Application:Docker Machine@v0.16.1
      - Application:OpenStack@queens
      - Application:Docker@18.06
      - Application:Go@1.12.1
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for rocky
- job:
    name: docker-machine-functional-devstack-rocky
    parent: docker-machine-functional-devstack
    description: |
      Test image building functionality of master Docker machine against rocky branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/rocky
# grandson job for rocky
- job:
    name: docker-machine-v0.16.1-functional-devstack-rocky
    parent: docker-machine-functional-devstack-rocky
    description: |
      Test image building functionality of v0.16.1 Docker machine against rocky branch of OpenStack.
    override-checkout: v0.16.1
    tags:
      - Category:Cloud
      - Project:docker/machine
      - Application:Docker Machine@v0.16.1
      - Application:OpenStack@rocky
      - Application:Docker@18.06
      - Application:Go@1.12.1
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for stein
- job:
    name: docker-machine-functional-devstack-stein
    parent: docker-machine-functional-devstack
    description: |
      Test image building functionality of master Docker machine against stein branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/stein
# grandson job for stein
- job:
    name: docker-machine-v0.16.1-functional-devstack-stein
    parent: docker-machine-functional-devstack-stein
    description: |
      Test image building functionality of v0.16.1 Docker machine against stein branch of OpenStack.
    override-checkout: v0.16.1
    tags:
      - Category:Cloud
      - Project:docker/machine
      - Application:Docker Machine@v0.16.1
      - Application:OpenStack@stein
      - Application:Docker@18.06
      - Application:Go@1.12.1
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# bosh huaweicloud cpi jobs
# the jobs are disabled now
- job:
    name: bosh-huaweicloud-cpi-release-validator-test-huaweicloud
    parent: init-test
    description: |
      This job validation tests of bosh-huaweicloud-cpi-release aganist Huaweicloud
    run: playbooks/bosh-huaweicloud-cpi-release-validator-test-huaweicloud/run.yaml
    required-projects:
      - zhongjun2/cf-huaweicloud-validator
    secrets:
      - huaweicloud_credentials
    nodeset: ubuntu-xenial-huaweicloud

- job:
    name: bosh-huaweicloud-cpi-release-acceptance-test-huaweicloud
    parent: init-test
    description: |
      This job run tests of bosh-acceptance-test aganist Huaweicloud
    run: playbooks/bosh-huaweicloud-cpi-release-acceptance-test-huaweicloud/run.yaml
    post-run: playbooks/bosh-huaweicloud-cpi-release-acceptance-test-huaweicloud/post.yaml
    required-projects:
      - cloudfoundry/bosh-acceptance-tests
    secrets:
      - huaweicloud_credentials
    nodeset: ubuntu-xenial-huaweicloud

## ========== bosh-openstack-cpi-release + openstack jobs ==============
# grandson job for stein
- job:
    name: bosh-openstack-cpi-release-v42-acceptance-test-stein
    parent: bosh-openstack-cpi-release-acceptance-test-stein
    description: |
      This job validation tests of v42 bosh-openstack-cpi-release against OpenStack Stein release.
    override-checkout: v42
    tags:
      - Category:Cloud
      - Project:cloudfoundry/bosh-openstack-cpi-release
      - Application:Bosh@v42
      - Application:OpenStack@stein
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# grandson job for rocky
- job:
    name: bosh-openstack-cpi-release-v42-acceptance-test-rocky
    parent: bosh-openstack-cpi-release-acceptance-test-rocky
    description: |
      This job validation tests of v42 bosh-openstack-cpi-release against OpenStack Rocky release.
    override-checkout: v42
    tags:
      - Category:Cloud
      - Project:cloudfoundry/bosh-openstack-cpi-release
      - Application:Bosh@v42
      - Application:OpenStack@rocky
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# grandson job for queens
- job:
    name: bosh-openstack-cpi-release-v42-acceptance-test-queens
    parent: bosh-openstack-cpi-release-acceptance-test-queens
    description: |
      This job validation tests of v42 bosh-openstack-cpi-release against OpenStack Queens release.
    override-checkout: v42
    tags:
      - Category:Cloud
      - Project:cloudfoundry/bosh-openstack-cpi-release
      - Application:Bosh@v42
      - Application:OpenStack@queens
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# grandson job for pike
- job:
    name: bosh-openstack-cpi-release-v42-acceptance-test-pike
    parent: bosh-openstack-cpi-release-acceptance-test-pike
    description: |
      This job validation tests of v42 bosh-openstack-cpi-release against OpenStack Pike release.
    override-checkout: v42
    tags:
      - Category:Cloud
      - Project:cloudfoundry/bosh-openstack-cpi-release
      - Application:Bosh@v42
      - Application:OpenStack@pike
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test
# grandson job for ocata
- job:
    name: bosh-openstack-cpi-release-v42-acceptance-test-ocata
    parent: bosh-openstack-cpi-release-acceptance-test-ocata
    description: |
      This job validation tests of v42 bosh-openstack-cpi-release against OpenStack Ocata release.
    override-checkout: v42
    tags:
      - Category:Cloud
      - Project:cloudfoundry/bosh-openstack-cpi-release
      - Application:Bosh@v42
      - Application:OpenStack@ocata
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# open service broker checker jobs
- job:
    name: osb-checker-test-huaweicloud
    parent: init-test
    description: |
      This job run tests of osb-checker aganist Huaweicloud
    run: playbooks/osb-checker-test-huaweicloud/run.yaml
    required-projects:
      - openservicebrokerapi/osb-checker
    secrets:
      - huaweicloud_credentials

# parent job
- job:
    name: manageiq-providers-openstack-test-devstack
    parent: init-test
    description: |
      This job run tests of manageiq-providers-openstack aganist master OpenStack.
    run: playbooks/manageiq-providers-openstack-test-devstack/run.yaml
    vars:
      postgresql_version: 10

# son job for mitaka
- job:
    name: manageiq-providers-openstack-test-devstack-mitaka
    parent: manageiq-providers-openstack-test-devstack
    description: |
      This job run tests of manageiq-providers-openstack aganist mitaka branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/mitaka
    nodeset: ubuntu-trusty
# grandson job for mitaka
- job:
    name: manageiq-providers-openstack-hammer-6-test-devstack-mitaka
    parent: manageiq-providers-openstack-test-devstack-mitaka
    description: |
      This job run tests of hammer-6 manageiq-providers-openstack aganist mitaka branch of OpenStack.
    override-checkout: hammer-6
    tags:
      - Category:Cloud
      - Project:manageiq/manageiq-providers-openstack
      - Application:manageiq-provider-openstack@hammer-6
      - Application:OpenStack@mitaka
      - Application:Ruby@v2.3.3
      - OS:ubuntu-trusty
      - Arch:x86_64
      - BuildType:Integration test

# son job for newton
- job:
    name: manageiq-providers-openstack-test-devstack-newton
    parent: manageiq-providers-openstack-test-devstack
    description: |
      This job run tests of manageiq-providers-openstack aganist newton branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/newton
# grandson job for newton
- job:
    name: manageiq-providers-openstack-hammer-6-test-devstack-newton
    parent: manageiq-providers-openstack-test-devstack-newton
    description: |
      This job run tests of hammer-6 manageiq-providers-openstack aganist newton branch of OpenStack.
    override-checkout: hammer-6
    tags:
      - Category:Cloud
      - Project:manageiq/manageiq-providers-openstack
      - Application:manageiq-providers-openstack@hammer-6
      - Application:OpenStack@newton
      - Application:Ruby@v2.3.3
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for ocata
- job:
    name: manageiq-providers-openstack-test-devstack-ocata
    parent: manageiq-providers-openstack-test-devstack
    description: |
      This job run tests of manageiq-providers-openstack aganist ocata branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/ocata
# grandson job for ocata
- job:
    name: manageiq-providers-openstack-hammer-6-test-devstack-ocata
    parent: manageiq-providers-openstack-test-devstack-ocata
    description: |
      This job run tests of hammer-6 manageiq-providers-openstack aganist ocata branch of OpenStack.
    override-checkout: hammer-6
    tags:
      - Category:Cloud
      - Project:manageiq/manageiq-providers-openstack
      - Application:manageiq-providers-openstack@hammer-6
      - Application:OpenStack@ocata
      - Application:Ruby@v2.3.3
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for pike
- job:
    name: manageiq-providers-openstack-test-devstack-pike
    parent: manageiq-providers-openstack-test-devstack
    description: |
      This job run tests of manageiq-providers-openstack aganist pike branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/pike
# grandson job for pike
- job:
    name: manageiq-providers-openstack-hammer-6-test-devstack-pike
    parent: manageiq-providers-openstack-test-devstack-pike
    description: |
      This job run tests of hammer-6 manageiq-providers-openstack aganist pike branch of OpenStack.
    override-checkout: hammer-6
    tags:
      - Category:Cloud
      - Project:manageiq/manageiq-providers-openstack
      - Application:manageiq-providers-openstack@hammer-6
      - Application:OpenStack@pike
      - Application:Ruby@v2.3.3
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for queens
- job:
    name: manageiq-providers-openstack-test-devstack-queens
    parent: manageiq-providers-openstack-test-devstack
    description: |
      This job run tests of manageiq-providers-openstack aganist queens branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/queens
# grandson job for queens
- job:
    name: manageiq-providers-openstack-hammer-6-test-devstack-queens
    parent: manageiq-providers-openstack-test-devstack-queens
    description: |
      This job run tests of hammer-6 manageiq-providers-openstack aganist queens branch of OpenStack.
    override-checkout: hammer-6
    tags:
      - Category:Cloud
      - Project:manageiq/manageiq-providers-openstack
      - Application:manageiq-providers-openstack@hammer-6
      - Application:OpenStack@queens
      - Application:Ruby@v2.3.3
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for rocky
- job:
    name: manageiq-providers-openstack-test-devstack-rocky
    parent: manageiq-providers-openstack-test-devstack
    description: |
      This job run tests of manageiq-providers-openstack aganist rocky branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/rocky
# grandson job for rocky
- job:
    name: manageiq-providers-openstack-hammer-6-test-devstack-rocky
    parent: manageiq-providers-openstack-test-devstack-rocky
    description: |
      This job run tests of hammer-6 manageiq-providers-openstack aganist rocky branch of OpenStack.
    override-checkout: hammer-6
    tags:
      - Category:Cloud
      - Project:manageiq/manageiq-providers-openstack
      - Application:manageiq-providers-openstack@hammer-6
      - Application:OpenStack@rocky
      - Application:Ruby@v2.3.3
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# son job for stein
- job:
    name: manageiq-providers-openstack-test-devstack-stein
    parent: manageiq-providers-openstack-test-devstack
    description: |
      This job run tests of manageiq-providers-openstack aganist stein branch of OpenStack.
    vars:
      global_env:
        OS_BRANCH: stable/stein
# grandson job for stein
- job:
    name: manageiq-providers-openstack-hammer-6-test-devstack-stein
    parent: manageiq-providers-openstack-test-devstack-stein
    description: |
      This job run tests of hammer-6 manageiq-providers-openstack aganist stein branch of OpenStack.
    override-checkout: hammer-6
    tags:
      - Category:Cloud
      - Project:manageiq/manageiq-providers-openstack
      - Application:manageiq-providers-openstack@hammer-6
      - Application:OpenStack@stein
      - Application:Ruby@v2.3.3
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# the jobs below for manageiq-providers-openstack with public clouds are disabled now
- job:
    name: manageiq-providers-openstack-test-huaweicloud
    parent: init-test
    description: |
      This job run tests of manageiq-providers-openstack aganist HuaweiCloud.
    run: playbooks/manageiq-providers-openstack-test-public-clouds/run.yaml
    vars:
      cloud_name: huaweicloud
    secrets:
      - huaweicloud_credentials

- job:
    name: manageiq-providers-openstack-test-opentelekomcloud
    parent: init-test
    description: |
      This job run tests of manageiq-providers-openstack aganist OpenTelekomCloud.
    run: playbooks/manageiq-providers-openstack-test-public-clouds/run.yaml
    vars:
      cloud_name: opentelekomcloud
    secrets:
      - opentelekomcloud_credentials

- job:
    name: manageiq-providers-openstack-test-orange
    parent: init-test
    description: |
      This job run tests of manageiq-providers-openstack aganist Orange Cloud.
    run: playbooks/manageiq-providers-openstack-test-public-clouds/run.yaml
    vars:
      cloud_name: orange
    secrets:
      - orange_credentials

- job:
    name: manageiq-providers-openstack-test-telefonica
    parent: init-test
    description: |
      This job run tests of manageiq-providers-openstack aganist Telefonica Cloud.
    run: playbooks/manageiq-providers-openstack-test-public-clouds/run.yaml
    vars:
      cloud_name: telefonica
    secrets:
      - telefonica_credentials

# terraform-provider-huaweicloud acceptance tests against FusionCloud
- job:
    name: terraform-provider-huaweicloud-acceptance-test-fusioncloud
    parent: golang-test
    description: |
      Run acceptance tests of terraform-provider-huaweicloud repo against fusioncloud
    run: playbooks/terraform-provider-huaweicloud-acceptance-test-fusioncloud/run.yaml
    post-run: playbooks/terraform-provider-huaweicloud-acceptance-test-fusioncloud/post.yaml
    timeout: 18000
    secrets:
      - fusioncloud_credentials

# the openshift jobs are disabled now
- job:
    name: openshift-origin-functional-test-huaweicloud
    parent: init-test
    description: |
      Run functional tests of openshift-origin repo of v3.9.0 release against huaweicloud
    run: playbooks/openshift-origin-functional-test-public-clouds/run.yaml
    post-run: playbooks/openshift-origin-functional-test-public-clouds/post.yaml
    vars:
      cloud_name: huaweicloud
      inventory_name: huawei
      openshift_image_name: "CentOS 7.5 64bit"
    secrets:
      - huaweicloud_credentials

- job:
    name: openshift-origin-functional-test-opentelekomcloud
    parent: init-test
    description: |
      Run functional tests of openshift-origin repo of v3.9.0 release against opentelekomcloud
    run: playbooks/openshift-origin-functional-test-public-clouds/run.yaml
    post-run: playbooks/openshift-origin-functional-test-public-clouds/post.yaml
    vars:
      cloud_name: opentelekomcloud
      inventory_name: otc
    secrets:
      - opentelekomcloud_credentials

- job:
    name: openshift-origin-functional-test-telefonica
    parent: init-test
    description: |
      Run functional tests of openshift-origin repo of v3.9.0 release against telefonica cloud
    run: playbooks/openshift-origin-functional-test-public-clouds/run.yaml
    post-run: playbooks/openshift-origin-functional-test-public-clouds/post.yaml
    vars:
      cloud_name: telefonica
      inventory_name: telefonica
    secrets:
      - telefonica_credentials

- job:
    name: openshift-origin-functional-test-orange
    parent: init-test
    description: |
      Run functional tests of openshift-origin repo of v3.9.0 release against orange cloud
    run: playbooks/openshift-origin-functional-test-public-clouds/run.yaml
    post-run: playbooks/openshift-origin-functional-test-public-clouds/post.yaml
    vars:
      cloud_name: orange
      inventory_name: orange
    secrets:
      - orange_credentials

- job:
    name: spark-integration-test-kubeadm-k8s-v1.14.0
    parent: init-test
    description: |
      Run integration tests of spark of master against v1.14.0 k8s cluster deployed by kubeadm
    run: playbooks/spark-integration-test-kubeadm-k8s/run.yaml
    post-run: playbooks/spark-integration-test-kubeadm-k8s/post.yaml
    secrets:
      - dockerhub
    vars:
      k8s_log_dir: '{{ ansible_user_dir }}/workspace/logs/kubernetes'
      kubernetes_version: 1.14.0
    tags:
      - Category:BigData
      - Project:apache/spark
      - Application:Spark@master
      - Application:Docker@18.06
      - Application:Kubernetes@v1.14.0
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

- job:
    name: spark-integration-test-minikube-k8s-v1.13.3
    parent: init-test
    description: |
      Run integration tests of spark of v2.4.0 against v1.13.3 k8s cluster deployed by v0.34.1 minikube
    run: playbooks/spark-integration-test-minikube-k8s/run.yaml
    post-run: playbooks/spark-integration-test-minikube-k8s/post.yaml
    override-checkout: branch-2.4
    vars:
      k8s_log_dir: '{{ ansible_user_dir }}/workspace/logs/kubernetes'
      minikube_version: v0.34.1
      kubernetes_version: v1.13.3
    tags:
      - Category:BigData
      - Project:apache/spark
      - Application:Spark@branch-2.4
      - Application:Docker@19.03
      - Application:Kubernetes@v1.13.3
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

- job:
    name: kind-integration-test-arm64
    parent: init-test
    description: |
      Run integration tests of Kubernetes IN Docker against ARM64 architecture
    run: playbooks/kind-integration-test-arm64/run.yaml
    post-run: playbooks/kind-integration-test-arm64/post.yaml
    nodeset: ubuntu-xenial-arm64
    vars:
      k8s_log_dir: '{{ ansible_user_dir }}/workspace/logs/kubernetes'
    secrets:
      - gcp_account_kind
    tags:
      - Category:Cloud
      - Project:kubernetes-sigs/kind
      - Application:Kind@master
      - Application:Go@1.12.1
      - Application:Kubernetes@master
      - Application:Docker@18.09
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Integration test

- job:
    name: helm-integration-test-kubeadm-k8s-v1.14.0
    parent: init-test
    description: |
      Run integration tests of helm charts with v1.14.0 k8s cluster deployed by kubeadm, and using docker image of v2.2.0 chart-testing tool which installed with helm v2.12.2
    run: playbooks/helm-integration-test-kubeadm-k8s/run.yaml
    vars:
      chart_testing_version: v2.2.0
      kubernetes_version: 1.14.0
    tags:
      - Category:Cloud
      - Project:helm/charts
      - Application:Helm@v2.12.2
      - Application:Kubernetes@v1.14.0
      - Application:Docker@18.06
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

- job:
    name: helm-integration-test-kubeadm-k8s-v1.12.7
    parent: init-test
    description: |
      Run integration tests of helm charts with v1.12.7 k8s cluster deployed by kubeadm, and using docker image of v2.2.0 chart-testing tool which installed with helm v2.12.2
    run: playbooks/helm-integration-test-kubeadm-k8s/run.yaml
    vars:
      chart_testing_version: v2.2.0
      kubernetes_version: 1.12.7
      docker_ce_version: 18.06
    tags:
      - Category:Cloud
      - Project:helm/charts
      - Application:Helm@v2.12.2
      - Application:Kubernetes@v1.12.7
      - Application:Docker@v18.06
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

- job:
    name: labkeeper-allinone-deployment-test
    parent: init-test
    description: |
      Try to deploy allinone openlab CI environment with labkeeper
    run: playbooks/labkeeper-allinone-deployment-test/run.yaml

- job:
    name: ai-on-openlab-test-vm
    parent: init-test
    description: |
      Train and inference AI model in openlab VM.
    run: playbooks/ai-on-openlab/run.yaml
    nodeset: ubuntu-xenial
    secrets:
      - moo_github_account
    vars:
      is_gpu_enabled: false

- job:
    name: ai-on-openlab-test-vm-with-gpu
    parent: init-test
    description: |
      Train and inference AI model on GPU in openlab VM.
    run: playbooks/ai-on-openlab/run.yaml
    nodeset: ubuntu-xenial-gpu
    secrets:
      - moo_github_account
    vars:
      is_gpu_enabled: true

- job:
    name: tensorflow-benchmarks-volcano-kubeflow-k8s-v1.14.0
    parent: init-test
    description: |
      Test benchmarks of tensorflow + volcano/kubeflow on k8s cluster
    run: playbooks/tensorflow-volcano-kubeflow-integration-test-k8s/run.yaml
    post-run: playbooks/tensorflow-volcano-kubeflow-integration-test-k8s/post.yaml
    timeout: 21600 # 6 hours
    vars:
      k8s_log_dir: '{{ ansible_user_dir }}/workspace/logs/kubernetes'
      kubernetes_version: 1.14.0
      kubeflow_version: v0.5.0
      volcano_version: release-0.1
      run_kubeflow_tfbenchmarks: true
      run_volcano_tfbenchmarks: true
    nodeset: ubuntu-xenial-k8s-tf
    
# grandson job for stein
- job:
    name: rust-openstack-0.2.3-acceptance-stein
    parent: rust-openstack-acceptance-stein
    description: |
      Run rust-openstack of 0.2.3 acceptance test on stein branch of OpenStack
    override-checkout: 0.2.3
    tags:
      - Category:Cloud
      - Project:dtantsur/rust-openstack
      - Application:Rust-openstack@0.2.3
      - Application:OpenStack@stein
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test
    
# grandson job for rocky
- job:
    name: rust-openstack-0.2.3-acceptance-rocky
    parent: rust-openstack-acceptance-rocky
    description: |
      Run rust-openstack of 0.2.3 acceptance test on rocky branch of OpenStack
    override-checkout: 0.2.3
    tags:
      - Category:Cloud
      - Project:dtantsur/rust-openstack
      - Application:Rust-openstack@0.2.3
      - Application:OpenStack@rocky
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# grandson job for queens
- job:
    name: rust-openstack-0.2.3-acceptance-queens
    parent: rust-openstack-acceptance-queens
    description: |
      Run rust-openstack of 0.2.3 acceptance test on queens branch of OpenStack
    override-checkout: 0.2.3
    tags:
      - Category:Cloud
      - Project:dtantsur/rust-openstack
      - Application:Rust-openstack@0.2.3
      - Application:OpenStack@queens
      - OS:ubuntu-xenial
      - Arch:x86_64
      - BuildType:Integration test

# hbase arm build periodic job
- job:
    name: hbase-build-arm64
    parent: init-test
    description: |
      Apache HBase build on arm64 server
    run: playbooks/hbase-build-arm64/run.yaml
    nodeset: ubuntu-xenial-arm64
    tags:
      - Category:BigData
      - Project:apache/hbase
      - Application:Hbase@master
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Compile

# Hive arm build periodic job
- job:
    name: hive-build-arm64
    parent: init-test
    description: |
      Apache Hive build on arm64 server
    run: playbooks/hive-build-arm64/run.yaml
    nodeset: ubuntu-xenial-arm64
    tags:
      - Category:BigData
      - Project:apache/hive
      - Application:Hive@master
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Compile

# Hadoop arm64 build periodic job
- job:
    name: hadoop-build-arm64
    parent: init-test
    description: |
      Apache Hadoop build on arm64 server
    run: playbooks/hadoop-build-arm64/run.yaml
    nodeset: ubuntu-xenial-arm64
    tags:
      - Category:BigData
      - Project:apache/hadoop
      - Application:hadoop@master
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Compile

# Spark arm64 build and run unit tests periodic job
- job:
    name: spark-master-unit-test-hadoop-2.7-arm64
    parent: init-test
    description: |
      Apache Spark build and run unit tests on arm64 server
    run: playbooks/spark-unit-test-arm64/run.yaml
    vars:
      hadoop_version: 2.7
    nodeset: ubuntu-xenial-arm64
    tags:
      - Category:BigData
      - Project:apache/spark
      - Application:Spark@master
      - Application:Hadoop@2.7
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Unit test
    timeout: 54000

# TODO(bzhaoopenstack) Notes: This is a demo job, once the upstream begin
# to discuss, this job will be removed asap.
# The forked Spark arm64 build and run unit tests periodic job with the commits
# before 20190909
- job:
    name: spark-unchanged-branch-unit-test-hadoop-2.7-arm64
    parent: init-test
    description: |
      The forked Apache Spark build and run unit tests with a unchanged
      branch before 20190909 on arm64 server
    run: playbooks/spark-unchanged-branch-unit-test/run.yaml
    vars:
      hadoop_version: 2.7
    nodeset: ubuntu-xenial-arm64
    tags:
      - Category:BigData
      - Project:theopenlab/spark
      - Application:Spark@test-branch20190909
      - Application:Hadoop@2.7
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Unit test
    timeout: 54000

- job:
    name: flink-end-to-end-test-part1
    parent: init-test
    description: |
      The flink e2e test which contains split_checkpoints.sh, split_sticky.sh
    run: playbooks/flink-end-to-end-test/run_part1.yaml
    post-run: playbooks/flink-end-to-end-test/post.yaml
    nodeset: ubuntu-xenial-arm64
    tags:
      - Category:BigData
      - Project:apache/flink
      - Application:Flink@master
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Integration test
    timeout: 54000

- job:
    name: flink-end-to-end-test-part2
    parent: init-test
    description: |
      The flink e2e test which contains split_heavy.sh, split_ha.sh
    run: playbooks/flink-end-to-end-test/run_part2.yaml
    post-run: playbooks/flink-end-to-end-test/post.yaml
    nodeset: ubuntu-xenial-arm64
    tags:
      - Category:BigData
      - Project:apache/flink
      - Application:Flink@master
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Integration test
    timeout: 54000

- job:
    name: flink-end-to-end-test-part3
    parent: init-test
    description: |
      The flink e2e test which contains split_misc.sh, split_misc_hadoopfree.sh
    run: playbooks/flink-end-to-end-test/run_part3.yaml
    post-run: playbooks/flink-end-to-end-test/post.yaml
    nodeset: ubuntu-xenial-arm64
    tags:
      - Category:BigData
      - Project:apache/flink
      - Application:Flink@master
      - OS:ubuntu-xenial
      - Arch:arm64
      - BuildType:Integration test
    timeout: 54000
